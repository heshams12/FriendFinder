<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <style>
        .Imager {
            width: 300px;


        }

        #myModalLabel {
            text-align: center;
        }

        h1 {
            text-align: center;
        }

        .modal-body {
            position: relative;
            padding: 15px;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1 class="text-center">
                <span class="glyphicon glyphicon-user"></span>Friend Finder</h1>
            <hr>
            <h2 class="text-center">Answer a few basic questions.</h2>

            <h2 class="text-center">Then find the friend with the greatest compatibility!</h2>
            <div class="text-center">

                <a href="/home">
                    <button type="button" class="btn btn-lg btn-default">
                        <span class="glyphicon glyphicon-home"></span>Home</button>
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="page-header">
                    <h2>Survey Questions</h2>
                </div>
                <h3>
                    <strong>About You</strong>
                </h3>
                <h4> Name (Required)</h4>
                <input type="text" id="name" class="form-control" required="">
                <h4> Link to Photo Image (Required)</h4>
                <input type="text" id="image" class="form-control" required="">
                <br>
                <h3>
                    <strong>Question 1</strong>
                </h3>
                <h4> My goals in life are clear</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel1">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>
                <h3>
                    <strong>Question 2</strong>
                </h3>
                <h4> If people are rude to me I just shrug it off</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel2">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>
                <h3>
                    <strong>Question 3</strong>
                </h3>
                <h4> I am confident in what I do</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel3">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>
                <h3>
                    <strong>Question 4</strong>
                </h3>
                <h4>I can work even when things are disorganised</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel4">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>

                <h3>
                    <strong>Question 5</strong>
                </h3>
                <h4>I consistently put full time and effort into everything I do</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel5">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>

                <h3>
                    <strong>Question 6</strong>
                </h3>
                <h4>I prefer achieving my goals than assisting others to achieve their goals</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel6">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>

                <h3>
                    <strong>Question 7</strong>
                </h3>
                <h4>I would describe myself as an extremely competent person</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel7">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>

                <h3>
                    <strong>Question 8</strong>
                </h3>
                <h4>I prefer working within a stable rather than flexible environment</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel8">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>

                <h3>
                    <strong>Question 9</strong>
                </h3>
                <h4>I am ambitious</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel9">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                </form>

                <h3>
                    <strong>Question 10</strong>
                </h3>
                <h4>It's better to get a job done than aim for perfection</h4>
                <form>
                    <div class="form-group">

                        <select class="form-control" id="sel10">
                            <span>Select an option</span>
                            <option>1 (Strongly Disagree)</option>
                            <option>2</option>
                            <option>3</option>
                            <option>4</option>
                            <option>5 (Strongly Agree)</option>
                        </select>
                        <br>
                        <button type="button" class="btn btn-primary active" id="button1">Submit</button>
                </form>











                </div>

                </div>
                <footer class="footer">
                    <div class="container">
                        <p>
                            <a href="/api/friends">API Friends List</a> |
                            <a href="https://github.com/heshams12/FriendFinder">GitHub Repo</a>
                        </p>
                    </div>
                </footer>
                </div>
                <script>
                    src = "https://code.jquery.com/jquery-3.3.1.js"
                    integrity = "sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
                    crossorigin = "anonymous"
                </script>

                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="modal-title" id="myModalLabel">Your Match</h4>
                            </div>
                            <div class="modal-body" id="modal-center">
                                ...
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                            </div>
                        </div>
                    </div>
                </div>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>




</html>

<script type="text/javascript">
    $("#button1").on("click", function (event) {
        event.preventDefault();


        const newFriend = {
            Name: $("#name").val().trim(),
            imageLink: $("#image").val().trim(),
            scores: [parseInt($("#sel1").val().trim()),
                parseInt($("#sel2").val().trim()),
                parseInt($("#sel3").val().trim()),
                parseInt($("#sel4").val().trim()),
                parseInt($("#sel5").val().trim()),
                parseInt($("#sel6").val().trim()),
                parseInt($("#sel7").val().trim()),
                parseInt($("#sel8").val().trim()),
                parseInt($("#sel9").val().trim()),
                parseInt($("#sel10").val().trim())
            ]


        };







        $.ajax({
            type: "POST",
            url: "/api/friends",

            data: JSON.stringify(
                newFriend
            ),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                console.log(data);
                $('#myModal').modal('show')
                var image = $('<img class="Imager">');
                var name = $("<h1>");
                image.attr("src", data.image);
                name.html(data.name);
                $("#modal-center").empty();
                $("#modal-center").append(name);
                $("#modal-center").append(image);

            },
            failure: function (errMsg) {
                console.log(errMsg);
            }
        });

    });
</script>